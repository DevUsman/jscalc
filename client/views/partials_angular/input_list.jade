.list-input-container(ng-init='metaInputOuter = metaInput')
  .item.item-prototype(ng-if='editMode')
    .title-row.title-row-list(layout='horizontal')
      .title.title-list(flex) Prototype of {{metaInput.label || '[Item name goes here]'}}
      .config-icons(ng-include="'/partials/input_config_icons'")
    .content-row
      .subtitle-row
        | Prototype of a repeating item will not be displayed in published calculator. Use it to configure (1) included inputs and (2) initial values for new instances.
      .sortable-container(ui-sortable, ng-model='metaInputOuter.metaInputs')
        .input-row.sortable-item(ng-repeat='metaInput in metaInputOuter.metaInputs track by metaInput.id', ng-include='getInputTemplateName(metaInput)', ng-init='inputsInner = metaInputOuter.itemPrototype; metaInputs = metaInputOuter.metaInputs; hidden = false')
      .button-row
        md-button.md-primary(ng-click="addInput({$event: $event, metaInputs: metaInputOuter.metaInputs, nested: true})") Add input
  .item.item-actual(ng-repeat='listItem in inputsInner[metaInput.id]', ng-init='indexListItem = $index; editMode = false')
    .title-row.title-row-list(layout='horizontal')
      .title(flex) {{metaInput.label || '[Item name goes here]'}} {{$index + 1}}
      .config-icons
        button.button-action.menu-icon.delete-item(aria-label='Delete', ng-click="deleteItem(inputsInner[metaInput.id], $index)")
          .md-icon-container
            .inline-icon.delete-icon.black-icon
    .content-row
      .input-row.sortable-item(ng-repeat='metaInput in metaInputOuter.metaInputs track by metaInput.id', ng-include='getInputTemplateName(metaInput)', ng-init='inputsInner = listItem; metaInputs = metaInputOuter.metaInputs', ng-class="{'hidden': metaInput.autohide && !usedInputs[metaInputOuter.id].properties[indexListItem].properties[metaInput.id].used}")
  .button-row
    md-button.md-primary(ng-click="addItem(inputsInner[metaInput.id], metaInput)") Add {{metaInput.label || '[Item name goes here]'}}
